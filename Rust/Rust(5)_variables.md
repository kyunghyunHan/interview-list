# 변수와 가변성

- Rust 는 불변성을 기본으로 하며, 어떤 경우에 회피하는지 살펴보자

- 불변 변수를 선언하면 일단 변수에 값을 한번 할당한 후에는 그 값을 변경할수 없다.

```rs
fn main() {
    let x = 5;
    println!("The value of x is: {}", x);
    x = 6;
    println!("The value of x is: {}", x);
}
```

```
$ cargo run
//error발생
```

- 에러의 원인은 불변 변수x에 값을 두번할당 할수 없음에도 불변 변수x에 값을 두번 할당했기 때문이다.
- rust는 컴파일러 차원에서 변경되지 않는다고 선언한 값은 실제로 변경할수 없도록 보장한다.
- 즉 코드를 읽고 쓸때 특정 변수의 값이 언제 어디서 바뀌는지 일일이 추적할 필요가 없다는 뜻이다.
- 하지만 떄댸로 가변성이 필요한 경우가 있다.변수의 불변성은 기본 변수 선언문을 사용했을때 만 적용된다.
- 변수 앞에 mut키워드를 추가하면 가변 변수를 선언할수 있다.
- mut키워드는 값을 변경할수있는 변수를 선언할 뿐만 아니라 다른사람이 코드를 읽을떄 이 변수는 다른 부분에서 값을 변경할수도 있다는 것을 충분하게 인지하게 해준다.

```rs
fn main() {
    let mut x = 5;
    println!("The value of x is: {}", x);
    x = 6;
    println!("The value of x is: {}", x);
}
```

- 이 프로그램을 다시 실행하면 다음과 같은 결과가 나온다

```
cargo run

x의 값:5
x의 값:6
```

- mut 키워드를 사용했으므로 변수x의 값을 5에서 6으로 변경할수 있었다
- 떄로는 불변변수만 사용할떄보다 코드를 더 쉽게 작성하기 위해 가변 변수가 필요할떄가 있다.
- 대용량 데이터구조,데이터를 매번 복사하고 새로운 인스턴스를 리턴하는 것보다 데이터의 인스턴스를 가변형으로 선언하느것이 더 빠르다.

## 변수와 상수의 차이점

- 변수의 값을 변경할 수 없다는점은 다른 언어들이 가진 프로그래밍개념인 상수에 가깝다 불변 변수처럼 상수 역시 한번 할당한 값은 변경할수 없지만,상수와 변수 사이에는 몇가지 차이점이 있다.
- 상수에 대해서 mut 를 사용하는것이 허용되지 않음.항상 불변이다
- 상수는 const키워드 사용 또한 타입을 선언해야함,할당한 값의 타입을 항상 지정해야한다.
- 상수는 자신이 선언되어 있는 영역 내에서 프로그램이 실행되는 시간동안 항상 유효

```rs
const MAX_POINTS: u32 = 100_000;
```

## 변수 가리기

- 이미 선언한 변수의 이름과 똑같은 이름의 변수를 사용할수 있다.
- 이때 이전에 선언한 변수는 새로 선언한 변수 떄문에 가려진다.
- 즉 변수의 이름을 참조하면 두번재 변수의 값이 사용된다.
- 변수를 가리키면 이미 선언된 변수와 똑같은 이름의 let키워드를 이용해 다시 선언하면 된다.

```rs
fn main() {
    let x = 5;

    let x = x + 1;

    let x = x * 2;

    println!("The value of x is: {}", x);
}
```

- 먼저 변수 x에 값 5를 할당한다.
- 다시 x에 1을 더한 값을 가린다.
- 다시 2를 곱한 값을 가린다

```
cargo run
x 의값 12
```

- 변수 가리기는 mut키워드를 사용하는 방법과는 다른다.
- let키워드를 이용해서 변수를 새로 선언하지 않고 값만 할당하면 컴파일 에러가 발생하기 떄문이다.
- let 키워드 덕분에 변수의값을 새로운 값으로 변경할수 있지만 새로 변경된 값도 여전히 불변 속성이다.
- 변수 가리기와 mut키워드 간의 또 다른 점은 let키워드를 사용할떄 새로운 변수를 선언하는 것이므로 이름은 같지만 타입은 또 다른 변수를 사용할수 있다.

```rs

let spaces = "   ";
let spaces = spaces.len();
```

- 이런 코드가 가능한 이유는 첫번쨰 spaces변수는 문자열 변수지만 두번쨰 변수는 이름만 같을뿐 숫자 타입을 사용하는 새로운 변수이기 떄문이다
- 변수가리기를 이용하면 spaces_str , spaces_num처럼 다른 변수를 선언하는것이 아니라 같은 변수를 계속 사용할수 있다.
- 하지만 mut키워드를 사용하면 컴파일 에러가 발생한다.

```rs
let mut spaces = "   ";
spaces = spaces.len();  //error
```
